{"version":3,"sources":["scripts/storage.js","scripts/card.js","scripts/cardController.js","scripts/configApi.js","scripts/serviceApi.js","scripts/appController.js","scripts/index.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["storage","getDataByKey","key","localStorage","getItem","JSON","parse","pushDataByKey","data","dataByKey","push","setItem","stringify","Card","title","text","id","stage","author","time","getTimeCreateCard","year","Date","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","OpenCard","stageName","getStageName","stages","document","querySelectorAll","parentNode","result","innerHTML","OpenCardDone","warningModal","querySelector","confirnModal","getElementById","confirnModalYes","confirnModalNo","authorsList","cardController","updateEventListeners","todoCards","forEach","card","addEventListener","evt","target","classList","add","remove","stageColums","preventDefault","activeElement","dropElement","isMoveable","contains","append","todoId","parseInt","activeTodo","filter","item","deleteItemById","parentElement","event","textContent","childElementCount","itemKey","value","stageId","appController","render","transferCard","btn","targetPath","currentCard","find","elem","dataLenght","checkLength","toggleModal","removeCard","setTimeout","toggleModalOff","toggleModalOn","displayAuthor","person","Option","name","buildOpenCard","obj","$stage","childNodes","insertAdjacentHTML","createOpenCardHTML","openCard","removeChild","changeTitle","openCardTitle","openCardComment","titleInput","createElement","className","replaceWith","commentInput","saveNewTitle","currentCardId","changedTitle","changedComment","configApi","baseUrl","endPoint","listUsers","getUserData","fetch","then","json","todosData","newData","map","filteredData","length","createHTML","join","toggle","filteredDataLength","initUserList","buildCard","nextId","confirmModal","removeItem","modal","fieldTitle","fieldText","saveCardButton","cancelBtn","closeModal","openModalCreateCard","closeWarningModal","app","cardValidation","forms","setCustomValidity","onclick","closest","deleteAllCards","openCardWindow","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"scripts.bcf3243b.js","sourceRoot":"../src","sourcesContent":["export const storage = {\n  // Получить все данные из хранилки по ключу\n  getDataByKey: function (key) {\n    if (localStorage.getItem(key) !== null) {\n      return JSON.parse(localStorage.getItem(key));\n    } else {\n      return [];\n    }\n  },\n  // Добавить данные по ключу\n  pushDataByKey: function (key, data) {\n    let dataByKey = this.getDataByKey(key);\n    dataByKey.push(data);\n    localStorage.setItem(key, JSON.stringify(dataByKey));\n  },\n};\n","export class Card {\n  constructor(title, text, id, stage, author) {\n    this.id = id;\n    this.title = title;\n    this.text = text;\n    this.author = author;\n    this.stage = stage;\n    this.time = Card.getTimeCreateCard();\n  }\n\n  static getTimeCreateCard() {\n    let year = new Date().getFullYear();\n    let month = new Date().getMonth() + 1;\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n    let day = new Date().getDate();\n    let hours = new Date().getHours();\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n    let minutes = new Date().getMinutes();\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n    return `${day}/${month}/${year} ${hours}:${minutes}`;\n  }\n\n  createHTML() {\n    return `\n    <div id=\"${this.id}\" draggable=\"true\" class=\"card\" id=\"card\">\n      <div class=\"card__header\">\n            <button id=\"card-btn-transfer-list\" type=\"button\" class=\"btn card__btn--transfer\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" \n                  stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-arrow-right\">\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                  <polyline points=\"12 5 19 12 12 19\"></polyline>\n              </svg>\n            </button>\n            <button id=\"close-card-btn-delete\" type=\"button\" class=\"btn card__btn--delete\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" \n                    stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trash-2\">\n                    <polyline points=\"3 6 5 6 21 6\"></polyline>\n                    <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\n                    <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\n                    <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\n                </svg>\n            </button>\n      </div>\n    \n    <h3 class=\"card__title\">${this.title}</h3>\n    <div class=\"card__footer\">\n     <p class=\"card__author\">${this.author}</p>\n     <time class=\"card__visit-time\">${this.time}</time>\n    </div>\n  </div>`;\n  }\n  \n}\n\nexport class OpenCard extends Card {\n  constructor (title, text, id, stage, author) {\n    super (title, text, id, stage, author)\n    this.stageName = this.getStageName()\n  }\n  getStageName () {\n    let stages = document.querySelectorAll('.stages-column__title')\n    for (let title of stages) {\n      if (title.parentNode.parentNode.id == this.stage) {\n        let result = title.innerHTML\n        return result\n      }\n    }\n  }\n  createOpenCardHTML() {\n    return `\n    <div id=\"wrap-open-card\" class=\"modal__wrap\">\n    <div id =${this.id} class=\"open-card\">\n    <button id=\"open-card-close\" \"class=\"open-card__close\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ffffff\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/></svg>\n    </button>\n    <div class=\"open-card__stage\">\n        <h3 class=\"open-card__stage-text\">${this.stageName}</h3>\n    </div>\n    <h3 id=\"open-card-title\" class=\"open-card__title\">${this.title}</h3>\n    <p id=\"open-card-comment\" class=\"open-card__comment\">${this.text}</p>\n    <button class=\"open-card__author\">${this.author}</button>\n    <p>${this.time}</p>\n    <div class=\"open-card__options\">\n        <button id=\"open-card__change\" class=\"open-card__changes\">Сhange</button>\n        <button id=\"open-card-save-change\" class=\"open-card__changes\">Save changes</button>\n        <button id=\"open-card__readiness\" class=\"open-card__readiness\">Start working</button>\n        <button id=\"open-card__delete\" class=\"open-card__delete\">Delete task</button>\n    </div>\n    </div>\n  </div>  \n    `\n  }\n}\n\nexport class OpenCardDone extends OpenCard {\n  constructor (title, text, id, stage, author, stageName) {\n    super (title, text, id, stage, author, stageName)\n  }\n  createOpenCardHTML() {\n    return `\n    <div id=\"wrap-open-card\" class=\"modal__wrap\">\n    <div id =${this.id} class=\"open-card\">\n    <button id=\"open-card-close\" \"class=\"open-card__close\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#ffffff\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/></svg>\n    </button>\n    <div class=\"open-card__stage\">\n        <h3 class=\"open-card__stage-text\">${this.stageName}</h3>\n    </div>\n    <h3 class=\"open-card__title\">${this.title}</h3>\n    <button class=\"open-card__author\">${this.author}</button>\n    <p>${this.time}</p>\n    <div class=\"open-card__options\">\n        <button id=\"open-card__change\" class=\"open-card__changes\">Сhange</button>\n        <button id=\"open-card-save-change\" class=\"open-card__changes\">Save changes</button>\n        <button id=\"open-card__readiness\" class=\"open-card__readiness\">Start working</button>\n        <button id=\"open-card__delete\" class=\"open-card__delete\">Delete task</button>\n    </div>\n    </div>\n  </div>  \n    `\n  }\n}","import { appController } from \"./appController.js\";\nimport { storage } from \"./storage.js\";\nimport { OpenCard } from \"./card.js\";\nimport { OpenCardDone } from \"./card.js\";\n\nconst warningModal = document.querySelector(\"#wrap-warning-modal\");\nconst confirnModal = document.getElementById(\"wrap-confirm-modal\");\nconst confirnModalYes = document.getElementById(\"modal-yes\");\nconst confirnModalNo = document.getElementById(\"modal-no\");\nconst authorsList = document.querySelector(\"#card-avatar\");\n\nexport const cardController = {\n    updateEventListeners: function () {\n        let todoCards = document.querySelectorAll('.card');\n        todoCards.forEach(card => {\n            card.addEventListener(`dragstart`, (evt) => {\n                evt.target.classList.add(`selected`);\n            });\n\n            card.addEventListener(`dragend`, (evt) => {\n                evt.target.classList.remove(`selected`);\n            });\n        })\n        let stageColums = document.querySelectorAll('.stages-column__cards');\n        stageColums.forEach(stage => {\n            stage.addEventListener(`dragover`, (evt) => {\n                evt.preventDefault();\n                const activeElement = document.querySelector(`.selected`);\n                const dropElement = evt.target;\n                const isMoveable = dropElement.classList.contains(`stages-column__cards`);\n                if (!isMoveable) {\n                    return;\n                }\n                dropElement.append(activeElement);\n                const todoId = parseInt(activeElement.id);\n                const activeTodo = storage.getDataByKey('todos').filter(item => item['id'] === todoId)[0];\n                this.deleteItemById('todos', 'id', todoId);\n                activeTodo.stage = parseInt(dropElement.parentElement.id);\n                storage.pushDataByKey('todos', activeTodo);\n\n            });\n            stage.addEventListener('drop', (event) => {\n                let stageColums = document.querySelectorAll('.stages-column__cards');\n                stageColums.forEach(stage => {\n                    stage.parentElement.querySelector('span.todo-count').textContent = stage.childElementCount;\n                })\n            });\n        })\n    },\n    // Удалить данные по ключу и по атрибуту\n    deleteItemById: function (key, itemKey, value) {\n        if (localStorage.getItem(key)) {\n            let dataByKey = storage.getDataByKey(key);\n            localStorage.setItem(key, JSON.stringify(dataByKey.filter(item => item[itemKey] !== value)));\n        } else {\n            this.deleteItemById(\"todos\", \"stage\", stageId);\n            appController.render();\n\n        }\n    },\n    transferCard: function (btn, targetPath) {\n        let data = storage.getDataByKey('todos')\n        let currentCard = data.find(elem => elem.id == targetPath)\n\n\n        if (btn.parentNode.parentNode.parentNode.parentNode.id == 1) {\n            // || btn.parentNode.parentNode.childNodes[3].childNodes[1].innerHTML == 1) \n            let dataLenght = appController.checkLength(2)\n            if (dataLenght === 6) {\n                appController.toggleModal(warningModal);\n            } else {\n                currentCard.stage = currentCard.stage + 1\n                cardController.deleteItemById('todos', 'id', currentCard.id)\n                storage.pushDataByKey('todos', currentCard)\n\n            }\n        } else {\n            if (currentCard.stage !== 3) {\n                currentCard.stage = currentCard.stage + 1\n                cardController.deleteItemById('todos', 'id', currentCard.id)\n                storage.pushDataByKey('todos', currentCard)\n\n            } else {\n                currentCard.stage = 1\n                cardController.deleteItemById('todos', 'id', currentCard.id)\n                storage.pushDataByKey('todos', currentCard)\n\n            }\n        }\n    },\n    removeCard: function (targetPath) {\n        let data = storage.getDataByKey('todos')\n\n        let currentCard = data.find(elem => elem.id == targetPath)\n        confirnModalYes.addEventListener('click', () => {\n            cardController.deleteItemById('todos', 'id', currentCard.id)\n            appController.render();\n            setTimeout(() => { this.updateEventListeners() }, 400)\n            appController.toggleModalOff(confirnModal)\n        })\n        confirnModalNo.addEventListener('click', () => {\n            appController.toggleModalOff(confirnModal)\n        })\n\n        if (currentCard.stage == 2) {\n            appController.toggleModalOn(confirnModal)\n        } else {\n            cardController.deleteItemById('todos', 'id', currentCard.id)\n            appController.render();\n            setTimeout(() => { this.updateEventListeners() }, 400)\n\n\n        }\n    \n    },\n\n    displayAuthor: function (person) {\n        authorsList.append(new Option(person.name, person.name));\n        return authorsList;\n    },\n    buildOpenCard: function(card) {\n        const {title, text, id, stage, author} = storage.getDataByKey('todos').find(obj => card.id == obj.id)\n        let stages = document.querySelectorAll('.stages-column--item')\n        for (let $stage of stages) {\n        if ($stage.id == stage) {\n            if ($stage.id != 3) {\n                $stage.childNodes[3].insertAdjacentHTML('beforeend', new OpenCard(title, text, id, stage, author).createOpenCardHTML())\n                } else {\n                    $stage.childNodes[3].insertAdjacentHTML('beforeend', new OpenCardDone(title, text, id, stage, author).createOpenCardHTML()) \n                }\n            }\n        }\n        const openCard = document.querySelector(\"#wrap-open-card\") \n        setTimeout(() => {appController.toggleModal(openCard)}, 100)\n\n        document.querySelector('#open-card-close').addEventListener('click', () => {\n        appController.toggleModal(openCard)\n        setTimeout(() => {openCard.parentNode.removeChild(openCard)}, 400)\n        })\n    \n    },\n\n    // Изменение данных в открытой карточке\n    changeTitle: function() {\n    let openCardTitle = document.getElementById(\"open-card-title\");\n    let openCardComment = document.getElementById(\"open-card-comment\");\n\n    // Замена заголовка на инпут\n    let titleInput = document.createElement(\"textarea\");\n    titleInput.innerHTML = openCardTitle.innerHTML;\n    titleInput.className = \"new-title__input\";\n    openCardTitle.replaceWith(titleInput);\n    // Замена комментария на инпут\n    let commentInput = document.createElement(\"textarea\");\n    commentInput.innerHTML = openCardComment.innerHTML;\n    commentInput.className = \"new-comment__input\";\n    openCardComment.replaceWith(commentInput);\n    },\n\n    saveNewTitle: function () {\n    // Перезапись заголовок в хранилке \n    let titleInput = document.querySelector(\".new-title__input\");\n    let currentCardId = titleInput.parentNode.id;\n    let data = storage.getDataByKey(\"todos\");\n    let currentCard = data.find((elem) => elem.id == currentCardId);\n\n    let changedTitle = titleInput.value;\n    currentCard.title = changedTitle;\n\n\n    // Перезапись комментария в хранилке \n    let commentInput = document.querySelector(\".new-comment__input\");\n    let changedComment = commentInput.value;\n    currentCard.text = changedComment;\n\n\n\n    cardController.deleteItemById('todos', 'id', currentCard.id)\n    storage.pushDataByKey('todos', currentCard);\n\n    appController.render();\n  },\n};\n","export const configApi = {\n  baseUrl: \"https://jsonplaceholder.typicode.com/\",\n  endPoint: {\n    listUsers: \"users\",\n  },\n};\n","import { configApi } from \"./configApi.js\";\n\nexport const getUserData = () => {\n  return fetch(configApi.baseUrl + configApi.endPoint.listUsers).then((data) =>\n    data.json()\n  );\n};\n","import { storage } from \"./storage.js\";\nimport { Card } from \"./card.js\";\nimport { cardController } from \"./cardController.js\";\nimport { getUserData } from \"./serviceApi.js\";\n\n\n\nexport const appController = {\n\n  render: function () {\n    let todosData = storage.getDataByKey('todos');\n    let newData = todosData.map(function (card) {\n      return new Card(card.title, card.text, card.id, card.stage, card.author)\n    })\n    let stages = document.querySelectorAll('.stages-column--item')\n    for (let stage of stages) {\n      if (todosData !== null) {\n        let filteredData = newData.filter(function (card) {\n          return stage.id == card.stage\n        });\n        stage.querySelector('span.todo-count').textContent = filteredData.length;\n        stage.childNodes[3].innerHTML = filteredData.map(card => card.createHTML(card)).join(' ');\n      } else return\n\n    }\n  },\n  toggleModal: function (elem) {\n    elem.classList.toggle(\"active\");\n  },\n\n  toggleModalOn: function (elem) {\n    elem.classList.add(\"active\");\n  },\n\n  toggleModalOff: function (elem) {\n    elem.classList.remove(\"active\");\n  },\n\n  checkLength: function(stage) {\n    let data = storage.getDataByKey('todos')\n    let filteredDataLength = data.filter(card => card.stage === stage).length\n    return filteredDataLength\n  },\n  \n  // buildCard: function (title, text, author) {\n  //   let nextId = 1;\n  //   if (localStorage.getItem(\"nextCardId\") !== null) {\n  //     nextId = parseInt(JSON.parse(localStorage.getItem(\"nextCardId\")));\n  //     localStorage.setItem(\"nextCardId\", JSON.stringify(++nextId));\n  //   } else {\n  //     localStorage.setItem(\"nextCardId\", JSON.stringify(nextId));\n  //   }\n  //   return new Card(title, text, nextId, 1, author);\n  // },\n\n  initUserList: function () {\n    getUserData().then((authorsList) =>\n      authorsList.forEach((author) => {\n        cardController.displayAuthor(author);\n      })\n    );\n  },\n  \n    \n  buildCard: function (title, text, author) {\n    let nextId = 1;\n    if (localStorage.getItem(\"nextCardId\") !== null) {\n      nextId = parseInt(JSON.parse(localStorage.getItem(\"nextCardId\")));\n      localStorage.setItem(\"nextCardId\", JSON.stringify(++nextId));\n      } else {\n      localStorage.setItem(\"nextCardId\", JSON.stringify(nextId));\n      }\n      return new Card(title, text, nextId, 1, author);\n  },\n    initUserList: function()  {\n      getUserData().then((authorsList) =>\n    authorsList.forEach((author) => {\n      cardController.displayAuthor(author);\n    })\n  );\n    },\n    deleteAllCards: function(btn) {\n      let data = storage.getDataByKey('todos')\n      const confirmModal = document.getElementById(\"wrap-confirm-modal\");\n      const confirnModalYes = document.getElementById(\"modal-yes\");\n      const confirnModalNo = document.getElementById(\"modal-no\");\n      \n\n\n    if (+btn.parentNode.parentNode.id === 2) {\n      this.toggleModalOn(confirmModal)\n      confirnModalYes.addEventListener('click', () => {\n        let filteredData = data.filter(elem => elem.stage != btn.parentNode.parentNode.id)\n        localStorage.removeItem('todos')\n        storage.pushDataByKey('todos', filteredData)\n        localStorage.setItem('todos', JSON.stringify(filteredData));\n        this.toggleModalOff(confirmModal)\n        this.render()\n\n      })\n      confirnModalNo.addEventListener('click', () => {\n        this.toggleModalOff(confirmModal)\n      })\n    } else {\n      let filteredData = data.filter(elem => elem.stage != btn.parentNode.parentNode.id)\n\n      localStorage.removeItem('todos')\n      storage.pushDataByKey('todos', filteredData)\n      localStorage.setItem('todos', JSON.stringify(filteredData));\n    }\n  },\n\n\n\n  //   localStorage.removeItem('todos')\n  //   storage.pushDataByKey('todos', filteredData)\n  //   localStorage.setItem('todos', JSON.stringify(filteredData));\n  // }\n};\n\n","\"use strict\";\n\nimport { storage } from \"./storage.js\";\nimport { appController } from \"./appController.js\";\nimport { cardController } from \"./cardController.js\";\n\n// Кнопки окна создания\nconst modal = document.querySelector(\"#wrap-card-modal\");\nconst fieldTitle = document.getElementById(\"card-modal__input-title\");\nconst fieldText = document.getElementById(\"card-modal__textarea-desc\");\nconst saveCardButton = document.getElementById(\"create-btn\");\nconst cancelBtn = document.getElementById(\"cancel-btn\");\nconst closeModal = document.getElementById(\"close-modal\");\nconst openModalCreateCard = document.getElementById(\"create-card\");\n// Кнопки окна предупреждения in progress length === 6\nconst warningModal = document.querySelector(\"#wrap-warning-modal\");\nconst closeWarningModal = document.getElementById(\"warning-cancel-btn\");\n\nconst authorsList = document.querySelector(\"#card-avatar\");\nconst stages = document.querySelector(\".stages-columns\");\n\n\nconst app = () => {\n  appController.render();\n  appController.initUserList();\n  cardController.updateEventListeners();\n \n\n  //   Окно добавления карточки\n  openModalCreateCard.addEventListener(\"click\", () => {\n    appController.toggleModal(modal);\n  });\n\n  cancelBtn.addEventListener(\"click\", () => {\n    appController.toggleModal(modal);\n  });\n\n  closeModal.addEventListener(\"click\", () => {\n    appController.toggleModal(modal);\n  });\n\n  saveCardButton.addEventListener(\"click\", () => {\n    let cardValidation = document.forms[\"card-form\"][\"card-modal__input-title\"].value;\n    if (cardValidation == \"\") {\n      fieldTitle.setCustomValidity(\"Please enter your ToDo title\");\n        return false;\n    }\n    let card = appController.buildCard(\n      fieldTitle.value,\n      fieldText.value,\n      authorsList.value\n    );\n    \n    storage.pushDataByKey(\"todos\", card);\n    appController.toggleModal(modal);\n    appController.render();\n    cardController.updateEventListeners();\n  });\n  // Окно предупреждения in progress length === 6\n  closeWarningModal.addEventListener(\"click\", () => {\n    appController.toggleModal(warningModal);\n  });\n\n\n  // Клики по кнопкам карточки\n  stages.onclick = function (event) {\n    let btn = event.target.closest(\"button\");\n    if (btn) {\n      if (!btn) return;\n    switch (btn.id) {\n      case \"card-btn-transfer-list\":\n        if (!btn.id) return;\n        let targetPath = btn.parentNode.parentNode.id\n        cardController.transferCard(btn, targetPath);\n        appController.render();\n        setTimeout(() => {cardController.updateEventListeners()}, 400)\n        break;\n\n      case \"close-card-btn-delete\":\n        if (!btn.id) return;\n        targetPath = btn.parentNode.parentNode.id\n        cardController.removeCard(targetPath);\n        appController.render();\n        setTimeout(() => {cardController.updateEventListeners()}, 400)\n        break;\n\n      case \"delete-all-btn\":\n        if (!btn.id) return;\n      \n        appController.deleteAllCards(btn)\n        appController.render()\n        setTimeout(() => {cardController.updateEventListeners()}, 400)\n        break;\n    }\n    } else {\n      let card = event.target.closest(\".card\");\n      if (!card) return;\n      cardController.buildOpenCard(card)\n      let openCard = document.querySelector('.open-card')\n\n      if (openCard !== null) {\n        openCard.onclick = function (event) {\n          let btn = event.target.closest(\"button\");\n          if (!btn) return;\n          let openCardWindow = document.getElementById('wrap-open-card')\n          let targetPath = btn.parentNode.parentNode.id;\n  \n        switch (btn.id) {\n          case \"open-card__readiness\":\n            if (!btn.id) return;\n            \n            appController.toggleModal(openCardWindow)\n            setTimeout(() => {openCard.parentNode.removeChild(openCard)}, 400)\n            cardController.transferCard(btn, targetPath);\n            appController.render();\n            setTimeout(() => {cardController.updateEventListeners()}, 400)\n            \n            break;\n\n          case \"open-card__delete\":\n            if (!btn.id) return;\n\n            cardController.removeCard(targetPath);\n            setTimeout(() => {openCard.parentNode.removeChild(openCard)}, 400)\n            appController.toggleModal(openCardWindow)\n            setTimeout(() => {appController.render()}, 300);\n            setTimeout(() => {cardController.updateEventListeners()}, 400)\n            \n          break;\n\n\n          case \"open-card__change\":\n          if (!btn.id) return;\n          cardController.changeTitle();\n          break;\n\n\n          case \"open-card-save-change\":\n          if (!btn.id) return;\n          cardController.saveNewTitle();\n          appController.render();\n          setTimeout(() => {cardController.updateEventListeners()}, 400)\n          break;\n\n\n        }\n      }\n    }\n    }\n  },\n  \n  appController.render();\n  cardController.updateEventListeners();\n};\n\napp();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}